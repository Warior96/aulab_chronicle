<!DOCTYPE html>
<html lang="en" xmlns="http://www.thymeleaf.org">

<head th:insert="~{index :: head}"></head>

<body>
    <div th:insert="~{index :: navbar}"></div>

    <div class="mt-5">
        <div th:if="${successMessage}" class="alert alert-success">
            <p th:text="${successMessage}"></p>
        </div>
    </div>

    <div class="container min-vh-100">
        <div class="row justify-content-center mb-5">

            <div class="col-12 d-flex justify-content-center align-items-center pt-5 pb-4">
                <h1 th:text="${title}">Dashboard</h1>
            </div>

            <div class="accordion col-10 mt-4">

                <!-- table pending articles -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseOne">
                            <h5>Articles to be revised</h5>
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div th:if="${#lists.isEmpty(pendingArticles)}">
                                <p>No articles to be revised.</p>
                            </div>
                            <table class="table table-striped table-responsive-lg"
                                th:unless="${#lists.isEmpty(pendingArticles)}">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Title</th>
                                        <th>Subtitle</th>
                                        <th>Category</th>
                                        <th>Detail</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="article : ${pendingArticles}">
                                        <td th:text="${article.id}"></td>
                                        <td th:text="${article.title}"></td>
                                        <td th:text="${article.subtitle}"></td>
                                        <td th:if="${article.category}" th:text="${article.category.name}"></td>
                                        <td th:unless="${article.category}">No category</td>
                                        <td>
                                            <a th:href="@{/articles/revisor/detail/{id}(id=${article.id})}"
                                                class="text-decoration-none">
                                                <i class="fa-solid fa-circle-info mx-2"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- table accepted articles -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseTwo">
                            <h5>Accepted articles</h5>
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div th:if="${#lists.isEmpty(acceptedArticles)}">
                                <p>No articles accepted.</p>
                            </div>
                            <table class="table table-success table-striped table-responsive-lg"
                                th:unless="${#lists.isEmpty(acceptedArticles)}">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Title</th>
                                        <th>Subtitle</th>
                                        <th>Category</th>
                                        <th>Action</th>
                                        <th>Detail</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="article : ${acceptedArticles}">
                                        <td th:text="${article.id}"></td>
                                        <td th:text="${article.title}"></td>
                                        <td th:text="${article.subtitle}"></td>
                                        <td th:if="${article.category}" th:text="${article.category.name}"></td>
                                        <td th:unless="${article.category}">No category</td>
                                        <td>

                                            <form
                                                th:action="@{/articles/accept(action='reject', articleId=${article.id})}"
                                                method="POST" th:object="${article}">
                                                <button type="submit" class="btn btn-danger mx-2">Reject</button>
                                            </form>
                                        </td>
                                        <td>
                                            <a th:href="@{/articles/revisor/detail/{id}(id=${article.id})}"
                                                class="text-decoration-none">
                                                <i class="fa-solid fa-circle-info mx-2"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- table rejected articles -->
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                            aria-controls="panelsStayOpen-collapseThree">
                            <h5>Rejected articles</h5>
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div th:if="${#lists.isEmpty(rejectedArticles)}">
                                <p>No articles rejected.</p>
                            </div>
                            <table class="table table-danger table-striped table-responsive-lg"
                                th:unless="${#lists.isEmpty(rejectedArticles)}">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Title</th>
                                        <th>Subtitle</th>
                                        <th>Category</th>
                                        <th>Action</th>
                                        <th>Detail</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="article : ${rejectedArticles}">
                                        <td th:text="${article.id}"></td>
                                        <td th:text="${article.title}"></td>
                                        <td th:text="${article.subtitle}"></td>
                                        <td th:if="${article.category}" th:text="${article.category.name}"></td>
                                        <td th:unless="${article.category}">No category</td>
                                        <td>
                                            <form
                                                th:action="@{/articles/accept(action='accept', articleId=${article.id})}"
                                                method="POST" th:object="${article}">
                                                <button type="submit" class="btn btn-success mx-2">Accept</button>
                                            </form>
                                        </td>
                                        <td>
                                            <a th:href="@{/articles/revisor/detail/{id}(id=${article.id})}"
                                                class="text-decoration-none">
                                                <i class="fa-solid fa-circle-info mx-2"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>





            </div>


        </div>
    </div>


    <div th:insert="~{index :: footer}"></div>

    <script th:replace="~{index :: bootstrapScript}"></script>
</body>

</html>